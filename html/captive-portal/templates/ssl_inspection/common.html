<div class="o-layout o-layout--center u-padding-bottom">
   <div class="o-layout__item u-1/1 u-2/3@tablet u-3/5@desktop">
	<a id="test" type="button" class="c-btn c-btn--secondary c-btn--ghost u-1/1" href="#testSSL">Test Certificate</a>
   </div>
</div>

<div class="u-padding">
  <div id="testFailure" class="o-media o-media--error u-padding u-margin-bottom hide">
    <div class="o-media__img">[% flashIcon(level='error') %]</div>
    <p class="o-media__body">[% i18n("Certificate test failed. Please download the certificate and install it by following the instructions, or contact your administrator.") %] </p>
  </div>

<script language="Javascript">
  $('#test').on('click', function() {
    $.ajax({ 
      url: 'https://packetfence.org/ssl-test/', 
      method: 'GET' 
    })
   .done(function() {
      window.location.href = "/captive-portal?next=next";
   })
   .fail(function() {
      testFailed();
   });
   return false;
  });

  $(function() {
    'use strict';
  
    window.testFailed = function() {
      $('#testFailure').removeClass('hide');
    };
  });

</script>
